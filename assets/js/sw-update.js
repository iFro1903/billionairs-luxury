!function(){"use strict";if("serviceWorker"in navigator){let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())}),navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&t.postMessage({type:"SKIP_WAITING"})})}),document.addEventListener("visibilitychange",()=>{document.hidden||e.update()})}).catch(e=>{console.error("[SW Update] Registration failed:",e)})}}();