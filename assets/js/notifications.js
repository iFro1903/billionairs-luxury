class NotificationManager{constructor(){this.permission="default",this.init()}async init(){"Notification"in window&&(this.permission=Notification.permission,"granted"!==this.permission&&"denied"!==this.permission&&this.setupPermissionRequest())}setupPermissionRequest(){if(!sessionStorage.getItem("notificationAsked")){const e=["click","touchstart","keydown"],i=async()=>{e.forEach(e=>document.removeEventListener(e,i)),await new Promise(e=>setTimeout(e,2e3)),this.requestPermission(),sessionStorage.setItem("notificationAsked","true")};e.forEach(e=>document.addEventListener(e,i,{once:!0}))}}async requestPermission(){try{const e=await Notification.requestPermission();this.permission=e,"granted"===e&&this.showWelcomeNotification()}catch(e){console.error("Error requesting notification permission:",e)}}showWelcomeNotification(){this.show({title:"BILLIONAIRS",body:"Notifications enabled. You'll be notified of important updates.",icon:"/favicon.ico"})}show(e){if("granted"!==this.permission)return;const i=new Notification(e.title,{body:e.body,icon:e.icon||"/favicon.ico",badge:"/favicon.ico",tag:e.tag||"billionairs-notification",requireInteraction:e.requireInteraction||!1,silent:e.silent||!1});return e.requireInteraction||setTimeout(()=>i.close(),5e3),i.onclick=()=>{window.focus(),e.onClick&&e.onClick(),i.close()},i}notifyNewChatMessage(e){this.show({title:"New Message",body:`${e} sent a message in The Inner Circle`,tag:"chat-message",onClick:()=>{window.luxuryChat&&!window.luxuryChat.isOpen&&window.luxuryChat.open()}})}notifyEasterEggUnlocked(e){this.show({title:"BILLIONAIRS",body:{pyramid:"Pyramid Unlocked! Your journey begins...",eye:"The Eye is now watching. Click to continue.",chat:"The Inner Circle awaits. Welcome, Titan."}[e]||"A new phase has been unlocked!",tag:"easter-egg",requireInteraction:!0})}notifyPaymentSuccess(){this.show({title:"Payment Confirmed",body:"Welcome to BILLIONAIRS. Your exclusive experience begins now.",tag:"payment",requireInteraction:!0})}notifySystemUpdate(e){this.show({title:"BILLIONAIRS Update",body:e,tag:"system-update"})}}window.notificationManager=new NotificationManager;