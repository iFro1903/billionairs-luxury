let deferredPrompt,isInstalled=!1;function showToast(e,n="info"){const t=document.getElementById("pwa-toast");t&&t.remove();const a=document.createElement("div");a.id="pwa-toast",a.textContent=e,a.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${"success"===n?"#00cc00":"warning"===n?"#ff9900":"#0066cc"};\n        color: white;\n        padding: 15px 25px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 600;\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n        z-index: 999999;\n        animation: slideInDown 0.3s ease;\n    `,document.body.appendChild(a),setTimeout(()=>{a.style.animation="slideOutUp 0.3s ease",setTimeout(()=>a.remove(),300)},3e3);const o=document.createElement("style");o.textContent="\n        @keyframes slideInDown {\n            from { transform: translateY(-100px); opacity: 0; }\n            to { transform: translateY(0); opacity: 1; }\n        }\n        @keyframes slideOutUp {\n            from { transform: translateY(0); opacity: 1; }\n            to { transform: translateY(-100px); opacity: 0; }\n        }\n        @keyframes slideOutRight {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(100px); opacity: 0; }\n        }\n    ",document.getElementById("pwa-animations")||(o.id="pwa-animations",document.head.appendChild(o))}(window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&(isInstalled=!0),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update()},36e5)}).catch(e=>{console.error("❌ Service Worker registration failed:",e)})}),window.addEventListener("appinstalled",e=>{isInstalled=!0,"undefined"!=typeof BillionairsAnalytics&&BillionairsAnalytics.trackPWAInstall();const n=document.getElementById("pwa-floating-install");n&&n.remove()}),"undefined"!=typeof BillionairsAnalytics&&(BillionairsAnalytics.trackPWAInstall=function(){"undefined"!=typeof gtag&&gtag("event","pwa_install",{event_category:"PWA",event_label:"App Installed"})}),window.addEventListener("online",()=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"ONLINE"}),showToast("✓ Connection restored","success")}),window.addEventListener("offline",()=>{showToast("⚠ You are offline. Some features may be limited.","warning")});