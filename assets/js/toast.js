class LuxuryToast{constructor(){this.container=null,this.queue=[],this.maxVisible=3,this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.createContainer()):this.createContainer()}createContainer(){this.container||(this.container=document.createElement("div"),this.container.id="luxuryToastContainer",this.container.className="luxury-toast-container",document.body.appendChild(this.container))}show(t,e="info",s={}){this.container||this.createContainer();const i={success:{duration:4e3,icon:"✓",title:"Success"},error:{duration:6e3,icon:"✕",title:"Error"},warning:{duration:5e3,icon:"⚠",title:"Warning"},info:{duration:4e3,icon:"ℹ",title:"Info"}},n=i[e]||i.info,o=s.persistent?0:s.duration||n.duration,r=s.title||n.title,a=document.createElement("div");a.className=`luxury-toast luxury-toast--${e}`,a.setAttribute("role","alert"),a.setAttribute("aria-live","assertive");const u=t.replace(/\n/g,"<br>");if(a.innerHTML=`\n            <div class="luxury-toast__icon">${n.icon}</div>\n            <div class="luxury-toast__content">\n                <div class="luxury-toast__title">${this.escapeHtml(r)}</div>\n                <div class="luxury-toast__message">${u}</div>\n            </div>\n            <button class="luxury-toast__close" aria-label="Close">&times;</button>\n            ${o>0?'<div class="luxury-toast__progress"></div>':""}\n        `,a.querySelector(".luxury-toast__close").addEventListener("click",()=>{this.dismiss(a)}),o>0){const t=a.querySelector(".luxury-toast__progress");t&&(t.style.animationDuration=`${o}ms`),a.autoTimer=setTimeout(()=>this.dismiss(a),o),a.addEventListener("mouseenter",()=>{clearTimeout(a.autoTimer);const t=a.querySelector(".luxury-toast__progress");t&&(t.style.animationPlayState="paused")}),a.addEventListener("mouseleave",()=>{const t=.5*o;a.autoTimer=setTimeout(()=>this.dismiss(a),t);const e=a.querySelector(".luxury-toast__progress");e&&(e.style.animationPlayState="running")})}return this.addSwipeToDismiss(a),this.container.appendChild(a),requestAnimationFrame(()=>{a.classList.add("luxury-toast--visible")}),a}dismiss(t){t&&!t.classList.contains("luxury-toast--dismissed")&&(t.classList.add("luxury-toast--dismissed"),clearTimeout(t.autoTimer),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},400))}addSwipeToDismiss(t){let e=0,s=0;t.addEventListener("touchstart",t=>{e=t.touches[0].clientX},{passive:!0}),t.addEventListener("touchmove",i=>{s=i.touches[0].clientX;const n=s-e;Math.abs(n)>10&&(t.style.transform=`translateX(${n}px)`,t.style.opacity=Math.max(0,1-Math.abs(n)/200))},{passive:!0}),t.addEventListener("touchend",()=>{const i=s-e;Math.abs(i)>80?this.dismiss(t):(t.style.transform="",t.style.opacity="")})}success(t,e={}){return this.show(t,"success",e)}error(t,e={}){return this.show(t,"error",e)}warning(t,e={}){return this.show(t,"warning",e)}info(t,e={}){return this.show(t,"info",e)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}window.toast=new LuxuryToast,window._originalAlert=window.alert,window.alert=function(t){window.toast&&window.toast.container?"string"==typeof t?t.startsWith("✓")||t.includes("Success")||t.includes("Sent!")?window.toast.success(t.replace(/^[✓✔]\s*/,""),{duration:6e3}):t.startsWith("❌")||t.includes("Error")||t.includes("Failed")||t.includes("error")?window.toast.error(t.replace(/^❌\s*/,"")):t.includes("Please")||t.includes("must")||t.includes("required")?window.toast.warning(t):window.toast.info(t):window.toast.info(String(t)):window._originalAlert(t)};